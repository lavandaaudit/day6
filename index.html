<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>IBONARIUM ¬∑ TIME TIME</title>

<style>
body {
    margin: 0;
    background: #000;
    color: #00ff9c;
    font-family: monospace;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    overflow: hidden;
}

.container {
    padding: 10px;
    max-width: 480px;
    margin: auto;
    z-index: 2;
    position: relative;
}

h1 { font-size: 16px; margin-bottom: 6px; }
.subtitle { font-size: 9px; opacity: 0.6; margin-bottom: 14px; }

.grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
}

.card {
    border: 1px solid rgba(0,255,150,0.35);
    padding: 10px;
    border-radius: 12px;
    background: rgba(0,255,150,0.03);
    backdrop-filter: blur(6px);
}

.label { font-size: 9px; opacity: 0.7; }
.value { font-size: 16px; margin-top: 4px; }
.desc { font-size: 9px; margin-top: 6px; opacity: 0.65; line-height: 1.3; }

.matrixCard {
    position: relative;
    overflow: hidden;
    height: 180px;
}

#matrixCanvas {
    width: 100%;
    height: 100%;
    display: block;
}

.systemReportCard {
    margin-top: 10px;
    border: 1px solid rgba(0,255,150,0.35);
    border-radius: 12px;
    padding: 10px;
    background: rgba(0,255,150,0.03);
    backdrop-filter: blur(6px);
    font-size: 9px;
    line-height: 1.3;
}

.bigIndex {
    margin-top: 14px;
    border: 1px solid rgba(0,255,200,0.6);
    border-radius: 16px;
    padding: 14px;
    background: rgba(0,255,200,0.04);
}
.indexValue { font-size: 28px; margin-top: 4px; }

.alertBox {
    margin-top: 10px;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid rgba(255,255,255,0.2);
    font-size: 10px;
}

.footer {
    margin-top: 12px;
    font-size: 8px;
    opacity: 0.5;
}

#starCanvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
    pointer-events: none;
}
</style>
</head>

<body>
<canvas id="starCanvas"></canvas>
<div class="container">

<h1>IBONARIUM¬∑TIME TIME.MONITOR</h1>
<div class="subtitle">Realtime –æ—Ü—ñ–Ω–∫–∞ –≤—ñ–¥–Ω–æ—Å–Ω–æ—Å—Ç—ñ —á–∞—Å—É —á–µ—Ä–µ–∑ —Ç–µ—Ö–Ω–æ, –º–µ—Ä–µ–∂–µ–≤—ñ —Ç–∞ —Ä–µ–ª—è—Ç–∏–≤—ñ—Å—Ç—Å—å–∫—ñ –ø—Ä–æ–∫—Å—ñ-–º–µ—Ç—Ä–∏–∫–∏</div>

<div class="grid">
<div class="card">
  <div class="label">LOCAL ATOMIC TIME (SIM)</div>
  <div class="value" id="atomicTime">--</div>
  <div class="desc">–ë–∞–∑–æ–≤–∏–π –µ—Ç–∞–ª–æ–Ω —á–∞—Å—É —Å–∏—Å—Ç–µ–º–∏. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ –ª–æ–∫–∞–ª—å–Ω–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–Ω–∞ —Ç–æ—á–∫–∞.</div>
</div>
<div class="card">
  <div class="label">GPS RELATIVITY OFFSET (SIM)</div>
  <div class="value" id="gpsOffset">--</div>
  <div class="desc">–†–µ–ª—è—Ç–∏–≤—ñ—Å—Ç—Å—å–∫–∞ –ø–æ–ø—Ä–∞–≤–∫–∞ –º—ñ–∂ —Å—É–ø—É—Ç–Ω–∏–∫–æ–≤–∏–º —Ç–∞ –∑–µ–º–Ω–∏–º —á–∞—Å–æ–º.</div>
</div>
<div class="card">
  <div class="label">NETWORK LATENCY</div>
  <div class="value" id="latency">--</div>
  <div class="desc">–ü—Ä–æ–∫—Å—ñ —à–≤–∏–¥–∫–æ—Å—Ç—ñ –ø–µ—Ä–µ–¥–∞—á—ñ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó ‚Äî —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏–π —á–∞—Å —Ü–∏–≤—ñ–ª—ñ–∑–∞—Ü—ñ—ó.</div>
</div>
<div class="card">
  <div class="label">TEMPORAL DRIFT (DERIVED)</div>
  <div class="value" id="drift">--</div>
  <div class="desc">–ü–æ—Ö—ñ–¥–Ω–µ –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è —á–∞—Å–æ–≤–∏—Ö —Å–∏—Å—Ç–µ–º –º—ñ–∂ —Å–æ–±–æ—é.</div>
</div>

<!-- –ú–∞—Ç—Ä–∏—Ü—è —á–∞—Å—É -->
<div class="matrixCard">
  <canvas id="matrixCanvas"></canvas>
</div>
</div>

<!-- –°–∏—Å—Ç–µ–º–∞ –∑–≤—ñ—Ç—É —è–∫ –æ–∫—Ä–µ–º–∏–π –±–ª–æ–∫ -->
<div class="systemReportCard" id="systemReportText">
  –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω —Å–∏—Å—Ç–µ–º–∏ —á–∞—Å—É IBONARIUM.<br>
  –ú–µ—Ç—Ä–∏–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó: –∞—Ç–æ–º–Ω–∏–π —á–∞—Å, GPS, –ª–∞—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å –º–µ—Ä–µ–∂—ñ.<br>
  –ü–æ–∫–∞–∑–Ω–∏–∫ —á–∞—Å—É: TIME IBONARIUM INDEX.<br>
  –°—Ç–∞—Ç—É—Å: –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö.<br>
  –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–∂–Ω—ñ 500 –º—Å.
</div>

<div class="bigIndex">
  <div class="label">TIME IBONARIUM INDEX</div>
  <div class="indexValue" id="timeIndex">--</div>
  <div class="alertBox" id="alertBox">–û—á—ñ–∫—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö...</div>
</div>

<div class="footer">IBONARIUM LAB ¬∑ UPDATE 500ms ¬∑ TEMPORAL MATRIX ACTIVE</div>
</div>

<script>
// ===== STARS BACKGROUND =====
const starCanvas = document.getElementById('starCanvas');
const starCtx = starCanvas.getContext('2d');
let stars = [];
function resizeStars() {
    starCanvas.width = window.innerWidth;
    starCanvas.height = window.innerHeight;
    stars = Array(150).fill().map(() => ({
        x: Math.random()*starCanvas.width,
        y: Math.random()*starCanvas.height,
        z: Math.random()*1.5+0.5,
        color: `hsl(${Math.random()*360}, 80%, 70%)`
    }));
}
window.addEventListener('resize', resizeStars);
resizeStars();
function drawStars() {
    starCtx.fillStyle='black';
    starCtx.fillRect(0,0,starCanvas.width,starCanvas.height);
    stars.forEach(s=>{
        s.y -= 0.2*s.z;
        if(s.y<0) { 
            s.y=starCanvas.height; 
            s.x=Math.random()*starCanvas.width; 
            s.color=`hsl(${Math.random()*360},80%,70%)`; 
        }
        starCtx.fillStyle = s.color;
        starCtx.beginPath();
        starCtx.arc(s.x,s.y, s.z*1.5,0,Math.PI*2);
        starCtx.fill();
    });
    requestAnimationFrame(drawStars);
}
drawStars();

// ===== METRICS =====
function updateAtomicTime() { 
    const now = new Date(); 
    document.getElementById("atomicTime").textContent = now.toISOString(); 
}
function updateGpsOffset() { 
    const base = 38; 
    const noise = (Math.random()-0.5)*3; 
    const value = base+noise; 
    document.getElementById("gpsOffset").textContent = value.toFixed(3)+" Œºs"; 
    return value; 
}
async function measureLatency() { 
    try { 
        const start = performance.now(); 
        await fetch("https://worldtimeapi.org/api/timezone/Etc/UTC", {cache:"no-store"}); 
        const end = performance.now(); 
        const latency = end-start; 
        document.getElementById("latency").textContent = latency.toFixed(1)+" ms"; 
        return latency; 
    } catch { 
        document.getElementById("latency").textContent="offline"; 
        return 0; 
    } 
}
function calcDrift(gps,latency){ return Math.abs(gps/40-latency/200); }
function calcTimeIbonariumIndex(gps,latency,drift){ return (gps/40)*0.45+(latency/200)*0.35+drift*0.2; }
function updateAlert(index){
    const box=document.getElementById("alertBox"); 
    const reportText=document.getElementById("systemReportText");
    if(index<0.4){ 
        box.innerHTML="üü¢ –°–ò–ù–•–†–û–ù–Ü–Ø ¬∑ –°—Ç–∞–±—ñ–ª—å–Ω–∏–π –ø—Ä–æ—Å—Ç—ñ—Ä-—á–∞—Å"; 
        box.style.borderColor="#00ff9c"; 
        reportText.innerHTML = "–°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±—ñ–ª—å–Ω–∞.<br>–í—Å—ñ —á–∞—Å–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏ –≤ –Ω–æ—Ä–º—ñ.<br>TIME IBONARIUM INDEX: "+index.toFixed(3);
    } else if(index<0.7){ 
        box.innerHTML="üü° –§–ê–ó–û–í–ò–ô –ó–°–£–í ¬∑ –ß–∞—Å–æ–≤—ñ —Å–∏—Å—Ç–µ–º–∏ —Ä–æ–∑—Ö–æ–¥—è—Ç—å—Å—è"; 
        box.style.borderColor="#ffaa00"; 
        reportText.innerHTML = "–ü–æ–º—ñ—Ç–Ω—ñ –∑—Å—É–≤–∏ –º—ñ–∂ —á–∞—Å–æ–≤–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏.<br>–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–µ—Ä–µ–∂—ñ —Ç–∞ GPS.<br>TIME IBONARIUM INDEX: "+index.toFixed(3);
    } else { 
        box.innerHTML="üî¥ TEMPORAL TURBULENCE ¬∑ –ô–º–æ–≤—ñ—Ä–Ω—ñ —Ñ–∞–∑–æ–≤—ñ –ø–µ—Ä–µ—Ö–æ–¥–∏"; 
        box.style.borderColor="#ff3366"; 
        reportText.innerHTML = "–ù–µ—Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ—Ä—É-—á–∞—Å—É!<br>–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è.<br>TIME IBONARIUM INDEX: "+index.toFixed(3);
    } 
}

// ===== MATRIX TIME RAIN =====
const canvas=document.getElementById("matrixCanvas"); 
const ctx=canvas.getContext("2d"); 
let drops=[]; 
let fontSize=12; 
let columns; 
let matrixSpeed=1; 
let matrixDensity=1; 
let matrixColor="#00ff9c"; 

function resizeMatrix(){
    canvas.width=canvas.clientWidth;
    canvas.height=canvas.clientHeight;
    columns=Math.floor(canvas.width/fontSize);
    drops=Array(columns).fill(1);
}
window.addEventListener("resize", resizeMatrix); 
resizeMatrix(); 

function updateMatrixFromIndex(index,drift){
    matrixSpeed=0.5+index*2;
    matrixDensity=0.5+drift;
    if(index<0.4) matrixColor="#00ff9c";
    else if(index<0.7) matrixColor="#ffaa00";
    else matrixColor="#ff3366";
}

function drawMatrix(){
    ctx.fillStyle="rgba(0,0,0,0.08)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle=matrixColor;
    ctx.font=fontSize+"px monospace";
    for(let i=0;i<drops.length;i++){
        if(Math.random()<matrixDensity){
            const text=Math.random()>0.5?"1":"0";
            ctx.fillText(text,i*fontSize,drops[i]*fontSize);
        }
        if(drops[i]*fontSize>canvas.height && Math.random()>0.975) drops[i]=0;
        drops[i]+=matrixSpeed;
    }
    requestAnimationFrame(drawMatrix);
}
drawMatrix();

// ===== MAIN LOOP =====
async function mainLoop(){ 
    updateAtomicTime(); 
    const gps=updateGpsOffset(); 
    const latency=await measureLatency(); 
    const drift=calcDrift(gps,latency); 
    document.getElementById("drift").textContent=drift.toFixed(3); 
    const index=calcTimeIbonariumIndex(gps,latency,drift); 
    document.getElementById("timeIndex").textContent=index.toFixed(3); 
    updateAlert(index); 
    updateMatrixFromIndex(index,drift); 
} 
setInterval(mainLoop,500); 
mainLoop();

// ===== MOBILE ADAPTATION =====
const mediaQuery = window.matchMedia('(max-width: 500px)'); 
function handleMobile(e) { 
    if(e.matches){ 
        document.querySelector('.grid').style.gridTemplateColumns='1fr'; 
        canvas.height=140; 
    } else { 
        document.querySelector('.grid').style.gridTemplateColumns='1fr 1fr'; 
        canvas.height=180; 
    } 
}
mediaQuery.addEventListener('change', handleMobile); 
handleMobile(mediaQuery);
</script>

</body>
</html>
